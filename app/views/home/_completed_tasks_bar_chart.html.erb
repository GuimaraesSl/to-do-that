<% max_tasks = data.map { |item| item[:count] }.max.to_f %>
<% dark_palette = %w[#1e40af #047857 #7e22ce #ca8a04 #be185d #b91c1c #0f172a #4b5563] %>

<div class="min-h-80 max-w-2xl bg-base-200 text-base-content p-8 rounded-2xl shadow-md h-full w-full border border-base-content/10">
  <h1 class="text-xl font-bold tracking-wide mb-6 font-mono">Meus Boards</h1>

  <% if data.any? %>
    <div class="space-y-6">
      <% data.each_with_index do |board, index| %>
        <% percent = ((board[:count].to_f / board[:total]) * 100).round %>
        <% color = dark_palette[index % dark_palette.size] %>

        <div class="w-full">
          <div class="flex justify-between text-sm mb-1 font-mono">
            <span class="truncate max-w-[50%] text-base-content"><%= board[:name] %></span>
            <span class="text-base-content/70"><%= board[:count] %>/<%= board[:total] %> concluídas</span>
          </div>

          <div class="w-full bg-base-100 rounded-full h-3 shadow-inner overflow-hidden">
            <div class="h-3 rounded-full transition-all duration-700 ease-out"
                 style="width: <%= percent %>%; background-color: <%= color %>;"></div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <p class="text-sm text-gray-500 font-mono">Você ainda não possui boards.</p>
  <% end %>
</div>
